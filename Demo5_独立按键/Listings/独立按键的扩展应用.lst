C51 COMPILER V9.60.0.0   __________________                                                09/24/2023 16:28:05 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE __________________
OBJECT MODULE PLACED IN .\Objects\¶ÀÁ¢°´¼üµÄÀ©Õ¹Ó¦ÓÃ.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ¶ÀÁ¢°´¼üµÄÀ©Õ¹Ó¦ÓÃ.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.
                    -\Listings\¶ÀÁ¢°´¼üµÄÀ©Õ¹Ó¦ÓÃ.lst) TABS(2) OBJECT(.\Objects\¶ÀÁ¢°´¼üµÄÀ©Õ¹Ó¦ÓÃ.obj)

line level    source

   1          #include <reg52.h>
   2          #define uchar unsigned char
   3          #define uint unsigned int
   4          
   5          // æŒ‰é”®
   6          sbit S7 = P3 ^ 0;
   7          sbit S6 = P3 ^ 1;
   8          sbit S5 = P3 ^ 2;
   9          sbit S4 = P3 ^ 3;
  10          
  11          // LEDç¯
  12          sbit L1 = P0 ^ 0;
  13          sbit L2 = P0 ^ 1;
  14          sbit L3 = P0 ^ 2;
  15          sbit L4 = P0 ^ 3;
  16          sbit L5 = P0 ^ 4;
  17          sbit L6 = P0 ^ 5;
  18          
  19          // HC138è¾“å‡ºY_channel
  20          void HC138(uchar channel)
  21          {
  22   1        switch (channel)
  23   1        {
  24   2          case 4:
  25   2            P2 = (P2 & 0x1f) | 0x80;
  26   2          break;
  27   2          case 5:
  28   2            P2 = (P2 & 0x1f) | 0xa0;
  29   2          break;
  30   2          case 6:
  31   2            P2 = (P2 & 0x1f) | 0xc0;
  32   2          break;
  33   2          case 7:
  34   2            P2 = (P2 & 0x1f) | 0xe0;
  35   2          break;
  36   2        }
  37   1      }
  38          
  39          // ç‹¬ç«‹æŒ‰é”®çš„å»¶æ—¶
  40          // å› ä¸ºå»¶æ—¶å¾ˆçŸ­ï¼Œæ‰€ä»¥ç”¨ucharå°±è¡Œ
  41          void DelayK(uchar t)
  42          {
  43   1        while(t--);
  44   1      }
  45          
  46          // æ§åˆ¶S7å’ŒS6çš„ä¿¡å·é‡
  47          uchar stat_k = 0;
  48          // æ‰«æç‹¬ç«‹æŒ‰é”®
  49          void ScanKeys_Alone()
  50          {
  51   1        if (S7 == 0)
  52   1        {
  53   2          // è¿™é‡Œå»¶æ—¶çš„ä½œç”¨ï¼š
  54   2          // æ¶ˆé™¤è¯¯å·®ï¼Œå› ä¸ºS7 ==0å¯èƒ½æ˜¯æ³¢åŠ¨é€ æˆçš„
C51 COMPILER V9.60.0.0   __________________                                                09/24/2023 16:28:05 PAGE 2   

  55   2          // æ‰€ä»¥ä¸éœ€è¦å¾ˆé•¿çš„å»¶æ—¶
  56   2          DelayK(100);
  57   2          
  58   2          // å»¶æ—¶ä¹‹åå†è¿›è¡Œåˆ¤æ–­ä¸€æ¬¡
  59   2          // å¦‚æœS7 == 0ï¼Œè¯´æ˜ä¸æ˜¯è¯¯å·®
  60   2          if (S7 == 0) 
  61   2          {
  62   3            // ä¿¡å·é‡æ˜¯0ï¼Œè¡¨ç¤ºS7å’ŒS6å‡æ²¡æœ‰æŒ‰ä¸‹
  63   3            if (stat_k == 0)
  64   3            {
  65   4              L1 = 0;
  66   4              stat_k = 1;
  67   4            }
  68   3            // ä¿¡å·é‡æ˜¯1ï¼Œè¡¨ç¤ºS7æŒ‰ä¸‹
  69   3            else if (stat_k == 1)
  70   3            {
  71   4              L1 = 1;
  72   4              stat_k = 0;
  73   4            }
  74   3            // ä¸€ç›´åˆ°è¿™æ¬¡æŒ‰é”®åŠ¨ä½œæ‰§è¡Œå®Œæˆä¹‹å
  75   3            // å†è¿›è¡Œåˆ«çš„æ“ä½œ
  76   3            // ä¸ç„¶ä¼šå‡ºç°é—ªçƒçš„æƒ…å†µ
  77   3            while (S7 == 0);
  78   3          }
  79   2        }
  80   1        
  81   1        if (S6 == 0)
  82   1        {
  83   2          DelayK(100);
  84   2          if (S6 == 0)
  85   2          {
  86   3            if (stat_k == 0)
  87   3            {
  88   4              L2 = 0;
  89   4              stat_k = 2;
  90   4            }
  91   3            else if (stat_k == 2)
  92   3            {
  93   4              L2 = 1;
  94   4              stat_k = 0;
  95   4            }
  96   3            while (S6 == 0);
  97   3          }
  98   2        }
  99   1        
 100   1        if (S5 == 0)
 101   1        {
 102   2          DelayK(100);
 103   2          if (S5 == 0)
 104   2          {
 105   3            if (stat_k == 1)
 106   3            {
 107   4              L3 = 0;
 108   4              while (S5 == 0);
 109   4              L3 = 1;
 110   4            } else if (stat_k == 2)
 111   3            {
 112   4              L5 = 0;
 113   4              while (S5 == 0);
 114   4              L5 = 1;
 115   4            }
 116   3          }
C51 COMPILER V9.60.0.0   __________________                                                09/24/2023 16:28:05 PAGE 3   

 117   2        }
 118   1        if (S4 == 0)
 119   1        {
 120   2          DelayK(100);
 121   2          if (S4 == 0)
 122   2          {
 123   3            if (stat_k == 1)
 124   3            {
 125   4              L4 = 0;
 126   4              while (S4 == 0);
 127   4              L4 = 1;
 128   4            } else if (stat_k == 2)
 129   3            {
 130   4              L6 = 0;
 131   4              while (S4 == 0);
 132   4              L6 = 1;
 133   4            }
 134   3          }
 135   2        }
 136   1      }
 137          
 138          void main()
 139          {
 140   1        // é€‰é€šY4
 141   1        HC138(4);
 142   1        while(1)
 143   1        {
 144   2          // ä¸€ç›´æ‰«æç‹¬ç«‹é”®ç›˜çš„çŠ¶æ€
 145   2          ScanKeys_Alone();  
 146   2        }
 147   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    228    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
