C51 COMPILER V9.60.0.0   __________________                                                10/06/2023 19:22:41 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE __________________
OBJECT MODULE PLACED IN .\Objects\¾ØÕó¼üÅÌµÄ»ù±¾²Ù×÷.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ¾ØÕó¼üÅÌµÄ»ù±¾²Ù×÷.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.
                    -\Listings\¾ØÕó¼üÅÌµÄ»ù±¾²Ù×÷.lst) TABS(2) OBJECT(.\Objects\¾ØÕó¼üÅÌµÄ»ù±¾²Ù×÷.obj)

line level    source

   1          #include <reg52.h>
   2          #define uint unsigned int
   3          #define uchar unsigned char
   4            
   5          // P4å¼•è„šï¼Œå¤´æ–‡ä»¶æ²¡æœ‰å®šä¹‰ï¼Œéœ€è¦è‡ªè¡Œå®šä¹‰
   6          sfr P4 = 0xC0;
   7            
   8          // æ ¹æ®åŸç†å›¾æ¥å®šä¹‰
   9          sbit R1 = P3 ^ 0;
  10          sbit R2 = P3 ^ 1;
  11          sbit R3 = P3 ^ 2;
  12          sbit R4 = P3 ^ 3;
  13          
  14          // æ ¹æ®åŸç†å›¾æ¥å®šä¹‰
  15          sbit C4 = P3 ^ 4;
  16          sbit C3 = P3 ^ 5;
  17          sbit C2 = P4 ^ 2;
  18          sbit C1 = P4 ^ 4;
  19          
  20          // æ•°ç ç®¡çš„æ®µç 
  21          uchar code SMG_duanma[18] = 
  22            {0xc0, 0xf9, 0xa4, 0xb0, 0x99, 0x92, 0x82, 0xf8, 
  23             0x80, 0x90, 0x88, 0x83, 0xc6, 0xa1, 0x86, 0x8e,
  24             0xbf, 0x7f};
  25          
  26          // é€‰é€šHC138çš„æŸä¸ªä¿¡é“
  27          void HC138(uchar channel) 
  28          {
  29   1        switch(channel)
  30   1        {
  31   2          case 4:
  32   2            P2 = (P2 & 0x1f) | 0x80;
  33   2          break;
  34   2          case 5:
  35   2            P2 = (P2 & 0x1f) | 0xa0;
  36   2          break;
  37   2          case 6:
  38   2            P2 = (P2 & 0x1f) | 0xc0;
  39   2          break;
  40   2          case 7:
  41   2            P2 = (P2 & 0x1f) | 0xe0;
  42   2          break;
  43   2        }
  44   1      }
  45          
  46          // æ•°ç ç®¡å±•ç¤ºvalueè¿™ä¸ªæ•°å€¼
  47          void DisplayKeyNum(uchar value)
  48          {
  49   1        HC138(6);
  50   1        P0 = 0x01;
  51   1        HC138(7);
  52   1        P0 = value;
  53   1      }
  54          
C51 COMPILER V9.60.0.0   __________________                                                10/06/2023 19:22:41 PAGE 2   

  55          // åˆ¤æ–­æ‰«æçš„æŒ‰é”®
  56          uchar key_num;
  57          // æ‰«æé”®ç›˜å‡½æ•°
  58          void ScanKeysMulti()
  59          {
  60   1        // åˆ¤æ–­ç¬¬ä¸€è¡Œçš„æŒ‰é”®
  61   1        R1 = 0;
  62   1        R2 = R3 = R4 = 1;
  63   1        // å…ˆå‘å¼•è„šè¾“å‡ºé«˜ç”µå¹³
  64   1        C1 = C2 = C3 = C4 = 1;
  65   1        // ç„¶åå†æ£€æµ‹å“ªä¸ªä¸ºä½ç”µå¹³
  66   1        if (C1 == 0)
  67   1        {
  68   2          // ç­‰æ¾æ‰‹ä¹‹åå†è¿›è¡Œåˆ¤æ–­
  69   2          while (C1 == 0);
  70   2          key_num = 0;
  71   2          // å±•ç¤ºæ•°ç 
  72   2          DisplayKeyNum(SMG_duanma[key_num]);
  73   2        }
  74   1        else if (C2 == 0) 
  75   1        {
  76   2          while(C2 == 0);
  77   2          key_num = 1;
  78   2          DisplayKeyNum(SMG_duanma[key_num]);
  79   2        }
  80   1        else if (C3 == 0)
  81   1        {
  82   2          while(C3 == 0);
  83   2          key_num = 2;
  84   2          DisplayKeyNum(SMG_duanma[key_num]);
  85   2        }
  86   1        else if (C4 == 0)
  87   1        {
  88   2          while(C4 == 0);
  89   2          key_num = 3;
  90   2          DisplayKeyNum(SMG_duanma[key_num]);
  91   2        }
  92   1        
  93   1        // åˆ¤æ–­ç¬¬äºŒè¡Œçš„æŒ‰é”®
  94   1        R2 = 0;
  95   1        R1 = R3 = R4 = 1;
  96   1        C1 = C2 = C3 = C4 = 1;
  97   1        if (C1 == 0)
  98   1        {
  99   2          while (C1 == 0);
 100   2          key_num = 4;
 101   2          DisplayKeyNum(SMG_duanma[key_num]);
 102   2        }
 103   1        else if (C2 == 0) 
 104   1        {
 105   2          while(C2 == 0);
 106   2          key_num = 5;
 107   2          DisplayKeyNum(SMG_duanma[key_num]);
 108   2        }
 109   1        else if (C3 == 0)
 110   1        {
 111   2          while(C3 == 0);
 112   2          key_num = 6;
 113   2          DisplayKeyNum(SMG_duanma[key_num]);
 114   2        }
 115   1        else if (C4 == 0)
 116   1        {
C51 COMPILER V9.60.0.0   __________________                                                10/06/2023 19:22:41 PAGE 3   

 117   2          while(C4 == 0);
 118   2          key_num = 7;
 119   2          DisplayKeyNum(SMG_duanma[key_num]);
 120   2        }
 121   1        
 122   1        // åˆ¤æ–­ç¬¬ä¸‰è¡Œçš„æŒ‰é”®
 123   1        R3 = 0;
 124   1        R1 = R2 = R4 = 1;
 125   1        C1 = C2 = C3 = C4 = 1;
 126   1        if (C1 == 0)
 127   1        {
 128   2          while (C1 == 0);
 129   2          key_num = 8;
 130   2          DisplayKeyNum(SMG_duanma[key_num]);
 131   2        }
 132   1        else if (C2 == 0) 
 133   1        {
 134   2          while(C2 == 0);
 135   2          key_num = 9;
 136   2          DisplayKeyNum(SMG_duanma[key_num]);
 137   2        }
 138   1        else if (C3 == 0)
 139   1        {
 140   2          while(C3 == 0);
 141   2          key_num = 10;
 142   2          DisplayKeyNum(SMG_duanma[key_num]);
 143   2        }
 144   1        else if (C4 == 0)
 145   1        {
 146   2          while(C4 == 0);
 147   2          key_num = 11;
 148   2          DisplayKeyNum(SMG_duanma[key_num]);
 149   2        }
 150   1        
 151   1        // åˆ¤æ–­ç¬¬å››è¡Œçš„æŒ‰é”®
 152   1        R4 = 0;
 153   1        R2 = R3 = R1 = 1;
 154   1        C1 = C2 = C3 = C4 = 1;
 155   1        if (C1 == 0)
 156   1        {
 157   2          while (C1 == 0);
 158   2          key_num = 12;
 159   2          DisplayKeyNum(SMG_duanma[key_num]);
 160   2        }
 161   1        else if (C2 == 0) 
 162   1        {
 163   2          while(C2 == 0);
 164   2          key_num = 13;
 165   2          DisplayKeyNum(SMG_duanma[key_num]);
 166   2        }
 167   1        else if (C3 == 0)
 168   1        {
 169   2          while(C3 == 0);
 170   2          key_num = 14;
 171   2          DisplayKeyNum(SMG_duanma[key_num]);
 172   2        }
 173   1        else if (C4 == 0)
 174   1        {
 175   2          while(C4 == 0);
 176   2          key_num = 15;
 177   2          DisplayKeyNum(SMG_duanma[key_num]);
 178   2        }
C51 COMPILER V9.60.0.0   __________________                                                10/06/2023 19:22:41 PAGE 4   

 179   1      }
 180          
 181          void main()
 182          {
 183   1        while(1)
 184   1        {
 185   2          ScanKeysMulti();
 186   2        }
 187   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    325    ----
   CONSTANT SIZE    =     18    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
